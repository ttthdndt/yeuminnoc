<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Y√™u N·ªçc ‚ù§Ô∏è ‚Äì Background YouTube + √Çm thanh</title>
  <style>
    html, body { height: 100%; }
    body {
      margin: 0;
      overflow: hidden;
      background: #000; /* fallback */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    /* NgƒÉn ch·ªçn/copy to√†n trang (r√†o v·∫∑t) */
    * { user-select: none; -webkit-user-select: none; }

    /* ==== N·ªÄN VIDEO YOUTUBE TO√ÄN M√ÄN H√åNH ==== */
    .video-bg { position: fixed; inset: 0; z-index: 0; overflow: hidden; }
    .video-bg iframe {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      border: 0; pointer-events: none; /* ko nh·∫≠n chu·ªôt */
      /* width/height s·∫Ω ƒë∆∞·ª£c set ƒë·ªông b·∫±ng JS ƒë·ªÉ lu√¥n COVER to√†n m√†n h√¨nh */
    }

    /* L·ªõp ph·ªß tƒÉng t∆∞∆°ng ph·∫£n ch·ªØ */
    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 1; }

    /* ==== CH·ªÆ/TR√ÅI TIM R∆†I ==== */
    .falling {
      position: fixed; top: -10vh; will-change: transform, opacity; z-index: 2;
      animation-timing-function: linear; animation-fill-mode: forwards; opacity: 0.95;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.6));
    }
    .falling .content { display: inline-block; white-space: nowrap; user-select: none; }

    /* r∆°i th·∫≥ng */
    @keyframes fall-straight { from { transform: translateY(-10vh); opacity: 1; } to { transform: translateY(110vh); opacity: 0.85; } }
    /* r∆°i ch√©o tr√°i */
    @keyframes fall-left { from { transform: translate(0, -10vh); opacity: 1; } to { transform: translate(-250px, 110vh); opacity: 0.85; } }
    /* r∆°i ch√©o ph·∫£i */
    @keyframes fall-right { from { transform: translate(0, -10vh); opacity: 1; } to { transform: translate(250px, 110vh); opacity: 0.85; } }
    /* Xo√°y + l·∫Øc ngang cho ph·∫ßn N·ªòI DUNG (con) */
    @keyframes spin-sway {
      0% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(24px) rotate(180deg); }
      50% { transform: translateX(-24px) rotate(360deg); }
      75% { transform: translateX(24px) rotate(540deg); }
      100% { transform: translateX(0) rotate(720deg); }
    }

    /* ==== N√öT B·∫¨T/T·∫ÆT √ÇM THANH ==== */
    .controls { position: fixed; right: 16px; bottom: 16px; z-index: 3; display: flex; gap: 10px; align-items: center; }
    .btn-audio {
      appearance: none; border: 0; border-radius: 999px; padding: 12px 18px; font-weight: 700; font-size: 16px;
      background: rgba(255,255,255,0.14); color: #fff; cursor: pointer; backdrop-filter: blur(6px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.35); transition: transform .15s ease, background .2s ease;
    }
    .btn-audio:hover { transform: translateY(-1px); background: rgba(255,255,255,0.22); }
      /* GIF g√≥c tr√°i tr√™n */
    .corner-gif {
      position: fixed;
      top: 10px;
      left: 10px;
      width: clamp(96px, 18vw, 220px); /* t·ª± co gi√£n theo m√†n h√¨nh */
      z-index: 4; /* tr√™n overlay & ch·ªØ r∆°i */
      pointer-events: none; /* kh√¥ng ch·∫∑n click l√™n trang */
      
      filter: contrast(1.15) brightness(1.05);
      image-rendering: -webkit-optimize-contrast;
    }
  </style>
</head>
<body>
  <!-- N·ªÄN VIDEO YOUTUBE (s·ª≠ d·ª•ng IFrame API ƒë·ªÉ ƒëi·ªÅu khi·ªÉn √¢m thanh) -->
  <div class="video-bg" aria-hidden="true">
    <div id="player"></div>
  </div>
  <div class="overlay" aria-hidden="true"></div>

  <!-- GIF g√≥c tr√°i tr√™n (h√£y ƒë·ªïi src th√†nh ƒë∆∞·ªùng d·∫´n GIF c·ªßa b·∫°n, v√≠ d·ª• /images/cat.gif) -->
  <img id="cornerGif" class="corner-gif" src="cat-dance.gif" alt="cat gif" decoding="async" />

  <!-- N√∫t ƒëi·ªÅu khi·ªÉn √¢m thanh -->
  <div class="controls">
    <button id="toggleAudio" class="btn-audio">B·∫≠t nh·∫°c üîä</button>
  </div>

  <script>
    // === T·∫¢I IFRAME API ===
    (function loadYT() {
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      document.head.appendChild(tag);
    })();

    let player;
    window.onYouTubeIframeAPIReady = function() {
      player = new YT.Player('player', {
        videoId: 'fXpJlk0sTGU',
        playerVars: {
          autoplay: 1, mute: 1, controls: 0, loop: 1, playlist: 'fXpJlk0sTGU',
          modestbranding: 1, rel: 0, iv_load_policy: 3, playsinline: 1
        },
        events: {
          onReady: (e) => { e.target.mute(); e.target.playVideo(); resizePlayer(); }
        }
      });
    };

    // N√∫t b·∫≠t/t·∫Øt √¢m thanh (c·∫ßn user interaction ƒë·ªÉ m·ªü ti·∫øng do ch√≠nh s√°ch tr√¨nh duy·ªát)
    const btn = document.getElementById('toggleAudio');
    btn.addEventListener('click', () => {
      try {
        if (!player) return;
        const muted = player.isMuted && player.isMuted();
        if (muted) {
          player.unMute();
          player.setVolume(70); // √¢m l∆∞·ª£ng m·∫∑c ƒë·ªãnh
          player.playVideo();
          btn.textContent = 'T·∫Øt ti·∫øng üîá';
        } else {
          player.mute();
          btn.textContent = 'B·∫≠t nh·∫°c üîä';
        }
      } catch (e) {
        try { player.unMute(); player.setVolume(70); player.playVideo(); btn.textContent = 'T·∫Øt ti·∫øng üîá'; } catch(_) {}
      }
    });

    // ====== LU√îN L·∫§P ƒê·∫¶Y M√ÄN H√åNH (COVER) ======
    function resizePlayer() {
      if (!player || !player.getIframe) return;
      const vw = window.innerWidth || document.documentElement.clientWidth;
      const vh = window.innerHeight || document.documentElement.clientHeight;
      const ratio = 16/9;    // t·ªâ l·ªá video
      const overscan = 1.08; // tƒÉng nh·∫π ƒë·ªÉ xo√° m√©p ƒëen/letterbox

      let width = vw, height = vw / ratio;
      if (height < vh) { // n·∫øu ch∆∞a ƒë·ªß cao -> t√≠nh theo chi·ªÅu d·ªçc
        height = vh;
        width = height * ratio;
      }
      width *= overscan;
      height *= overscan;

      try { player.setSize(Math.ceil(width), Math.ceil(height)); } catch (_) {}

      const el = document.getElementById('player');
      if (el) {
        el.style.width = Math.ceil(width) + 'px';
        el.style.height = Math.ceil(height) + 'px';
        el.style.position = 'fixed';
        el.style.top = '50%';
        el.style.left = '50%';
        el.style.transform = 'translate(-50%, -50%)';
      }
    }

    window.addEventListener('resize', resizePlayer);
    window.addEventListener('orientationchange', resizePlayer);
    document.addEventListener('DOMContentLoaded', () => setTimeout(resizePlayer, 0));
    setInterval(resizePlayer, 1500);
  </script>

  <script>
    // ====== HI·ªÜU ·ª®NG CH·ªÆ & TIM R∆†I ======
    const texts = [
      'Anh y√™u em', 'M√£i y√™u N·ªçc', 'L√†m ng∆∞·ªùi y√™u anh nh√©', 'Qu·∫°c',
      '‚ù§Ô∏è','üíñ','üíò','üíï','üíû','üíì','üíó','üíú','üíö'
    ];
    const MODES = ['straight', 'spin', 'left', 'right'];
    const COLORS = ['#ffc0cb', '#ff5a7a', '#ffd166', '#c8ff89', '#8fd3ff', '#d0b3ff', '#ffffff'];

    const rand = (arr) => arr[Math.floor(Math.random()*arr.length)];
    const randRange = (min, max) => Math.random()*(max-min)+min;

    function createFalling() {
      const outer = document.createElement('div');
      outer.className = 'falling';
      const inner = document.createElement('span');
      inner.className = 'content';
      inner.textContent = rand(texts);

      // v·ªã tr√≠ & style
      outer.style.left = randRange(0,100) + 'vw';
      inner.style.fontSize = randRange(20, 52) + 'px';
      inner.style.color = rand(COLORS);

      // mode chuy·ªÉn ƒë·ªông
      const mode = rand(MODES);
      const duration = randRange(7.5, 12.5);
      const delay = randRange(0, 1.2);

      let outerAnim = 'fall-straight';
      if (mode === 'left') outerAnim = 'fall-left';
      if (mode === 'right') outerAnim = 'fall-right';
      outer.style.animation = `${outerAnim} ${duration}s linear ${delay}s forwards`;

      if (mode === 'spin') {
        inner.style.animation = `spin-sway ${Math.max(4, duration * 0.8)}s linear infinite`;
      }

      outer.appendChild(inner);
      document.body.appendChild(outer);
      outer.addEventListener('animationend', () => outer.remove());
    }

    // M·∫≠t ƒë·ªô cao: m·ªói 100ms sinh 2, th·ªânh tho·∫£ng burst th√™m 3
    setInterval(() => {
      createFalling();
      createFalling();
      if (Math.random() < 0.08) for (let i=0;i<3;i++) createFalling();
    }, 100);
  </script>

  <!-- ===== R√ÄO V·∫∂T: CH·∫∂N M·ªòT S·ªê H√ÄNH VI & PH√çM DEVTOOLS (KH√îNG TUY·ªÜT ƒê·ªêI) ===== -->
  <script>
    // Ch·∫∑n menu chu·ªôt ph·∫£i, k√©o th·∫£, copy
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('dragstart',  e => e.preventDefault());
    document.addEventListener('copy',       e => e.preventDefault());

    // Ch·∫∑n m·ªôt s·ªë ph√≠m t·∫Øt ph·ªï bi·∫øn m·ªü DevTools / xem ngu·ªìn
    document.addEventListener('keydown', e => {
      const k = (e.key || '').toUpperCase();
      const ctrl = e.ctrlKey || e.metaKey; // h·ªó tr·ª£ macOS
      if (
        k === 'F12' ||
        (e.ctrlKey && e.shiftKey && ['I','J','C','K'].includes(k)) || // Ctrl+Shift+I/J/C/K
        (ctrl && ['U','S','P'].includes(k)) // Ctrl/Cmd + U/S/P
      ) {
        e.preventDefault();
        e.stopPropagation();
        return false;
      }
    }, { capture: true });

    // Ph√°t hi·ªán (∆∞·ªõc l∆∞·ª£ng) DevTools m·ªü -> l√†m m·ªù trang (ch·ªâ r√†o v·∫∑t)
    let devtoolsOpen = false;
    const TH = 160; // ng∆∞·ª°ng ch√™nh l·ªách k√≠ch th∆∞·ªõc c·ª≠a s·ªï
    function checkDevtools() {
      const wDiff = window.outerWidth  - window.innerWidth;
      const hDiff = window.outerHeight - window.innerHeight;
      const opened = (wDiff > TH) || (hDiff > TH);
      if (opened !== devtoolsOpen) {
        devtoolsOpen = opened;
        document.body.style.filter = devtoolsOpen ? 'blur(6px)' : '';
      }
    }
    setInterval(checkDevtools, 1000);

    // Th·ªß thu·∫≠t anti-debug (kh√¥ng ƒë·∫£m b·∫£o): n·∫øu debugger l√†m tr·ªÖ, √°p hi·ªáu ·ª©ng m·ªù
    (function antiDebug(){
      const t0 = Date.now();
      // eslint-disable-next-line no-debugger
      debugger;
      const elapsed = Date.now() - t0;
      if (elapsed > 200) {
        document.body.style.filter = 'blur(6px)';
      }
      setTimeout(antiDebug, 3000);
    })();
  </script>
</body>
</html>
